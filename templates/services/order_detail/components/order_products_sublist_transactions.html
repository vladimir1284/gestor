{% load static %}

<div class="table-responsive !overflow-auto">
    <table class="table table-sm">
        <thead class="sticky top-0 bg-white z-10">
            <tr>
                <th>Product</th>
                <th class="text-end">Quantity</th>
                <th class="text-end">Price</th>
                <th class="text-end">Tax</th>
            </tr>
        </thead>
        <tbody class="table-border-bottom-0">
            <template x-for="transaction in satisfied">
                <tr>
                    <td>
                        <strong x-text="transaction.product.name"></strong>
                    </td>
                    <td class="text-end">
                        <span x-text="transaction.quantity"></span>
                    </td>
                    <td class="text-end">
                        $<strong x-text="getAmount(transaction).toFixed(2)"></strong>
                    </td>
                    <td class="text-end">
                        $<span x-text="getTax(transaction).toFixed(2)"></span>
                    </td>
                </tr>
            </template>

            {%if order.status == 'processing'%}
                <tr class="bg-mainBG" x-show="unsatisfied.length > 0">
                    <th colspan="100%">
                        <div class="flex items-center">
                            <div class="flex-grow">
                                <span class="text-danger mr-2">
                                    Out Stock
                                </span>
                                <strong>
                                    $<span x-text="unsatisfied_args.total.toFixed(2)"></span>
                                </strong>
                                =
                                <span>
                                    $<span x-text="unsatisfied_args.amount.toFixed(2)"></span>
                                </span>
                                +
                                <span>
                                    $<span x-text="unsatisfied_args.tax.toFixed(2)"></span>
                                </span>
                            </div>
                            <div>
                                <a class="btn btn-link btn-icon"
                                   href="{%url 'service-order-out-stock-print' order.id%}">
                                    <i class='bx bx-printer'></i>
                                </a>
                            </div>
                        </div>
                    </th>
                </tr>
            {% endif %}

            <template x-for="transaction in unsatisfied">
                <tr>
                    <td>
                        <strong x-text="transaction.product.name"></strong>
                    </td>
                    <td class="text-end">
                        <span x-text="transaction.quantity"></span>
                    </td>
                    <td class="text-end">
                        $<strong x-text="getAmount(transaction).toFixed(2)"></strong>
                    </td>
                    <td class="text-end">
                        $<span x-text="getTax(transaction).toFixed(2)"></span>
                    </td>
                </tr>
            </template>
        </tbody>
    </table>
</div>

